---
title: 📜 正则表达式
date: 2020-02-02 14:17:22
abbrlink: 9d8oxogs
categories: 杂七杂八
excerpt: 正则表达式是由特定字符组成的规则字符串，通过各个语言中给出的相关方法，可以判断字符串是否符合正则表达式的规则，也可以将字符串中符合规则的部分提取出来，或者修改为其它值。通常用于验证表单数据、和谐某些关键字等。
---

# 📜 正则表达式

正则表达式是由特定字符组成的**规则字符串**，通过各个语言中给出的相关方法，可以判断字符串是否符合正则表达式的规则，也可以将字符串中符合规则的部分提取出来，或者修改为其它值。通常用于验证表单数据、和谐某些关键字等。

由于在不同的语言中，规则的语法都是相同的，因此这里仅给出规则，并以 JavaScript 为例：

## 特殊字符

### 字面量字符

字面量字符指的是表示字面本身含义的字符。注意，只要是内容中包含该字面量，即视为匹配，与位置无关。

```js
/dog/.test('good dog') // => true
```

### 边界符

边界符`^`表示内容的开始位置，`$`表示内容的结束位置。

```js
/^cat/.test('cat is cute') // => true，表示 cat 必须出现在内容开始的位置
/^cat/.test('The cat is mine') // => false

/dog$/.test('dog is cute') // => false，表示 dog 必须出现在内容结束的位置
/dog$/.test('This is my dog') // => true
```

如果规则同时使用了两个边界符，也就是既满足起点，又满足终点，那么表示该字符串必须完全符合规则，而不是仅仅包含就可以。

```js
/^cat$/.test('cat') // 只有这种情况才是 true
```

### 字符类

字符类表示有一系列字符可供选择，只要匹配其中一个就可以了，注意**一个字符类仅表示一个字符**。所有可供选择的字符都放在方括号内，比如`[xyz]` 表示只要字符串中有`x`、`y`、`z`中任何一个即可匹配。

```js
/[abc]/.test('helloworld') // => false，不包含 a、b、c 三个字母中任意一个
/[abc]/.test('apple') // => true，因为包含 a
```

### 连字符

对于连续序列的字符，可以使用连字符`-`提供简写形式，表示字符的范围。比如，`[abc]`可以写作`[a-c]`，`[0123456789]`可以写作`[0-9]`，所有大写字母可以写作`[A-Z]`。

```js
/[a-z]/.test('b') // => true
/[a-z0-9A-Z]/.test('1') // => true
```

注意，连字符只有在字符类中，且两侧均有字符时，才表示连字符。其他情况下，它依然表示`-`本身，不需要转义。

对于一些常用的字符类，还提供了简写模式：

| 字符类简写 | 描述 |
| --- | --- |
| `\d` | 表示`0 ~ 9`之间的任一数字，相当于`[0-9]` |
| `\D` | 表示所有`0 ~ 9`以外的字符，相当于`[^0-9]` |
| `\w` | 表示任意的字母、数字和下划线，相当于`[A-Za-z0-9_]` |
| `\W` | 表示除所有字母、数字和下划线以外的字符，相当于`[^A-Za-z0-9_]` |
| `\s` | 匹配空格（包括换行符、制表符、空格符等），相当于`[ \t\r\n\v\f]` |
| `\S` | 匹配所有非空格的字符，相当于`[^ \t\r\n\v\f]` |

### 脱字符

如果方括号内的第一个字符是`^`，则表示除了字符类之中的字符，其他字符都可以匹配。比如，`[^xyz]`表示除了`x`、`y`、`z`之外都可以匹配。

```js
/[^abc]/.test('hello world') // => true
/[^abc]/.test('bbc') // => false
```

注意，脱字符只有在**整个正则表达式的开头**或者**字符类的开头**才有特殊含义，否则就是字面含义。

### 量词符

量词符用来限定某个字符出现的次数。

| 量词符 | 描述 |
| --- | --- |
| `?` | 表示 0 次或 1 次 |
| `*` | 表示 0 次或多次，即任意次 |
| `+` | 表示 1 次或多次 |

```js
/sto?p/.test('stop') // => true
/sto?p/.test('stp') // => true

/sto*p/.test('stoooop') // => true

/sto+p/.test('stoooop') // => true
/sto+p/.test('stp') // => false
```

除了上述固定数量的量词符外，使用`{}`还可以限定任意数量：

| 量词符 | 描述 |
| --- | --- |
| `{n}` | 表示正好`n`次 |
| `{n,}` | 表示至少`n`次 |
| `{n,m}` | 表示至少`n`次，至多`m`次（均包括） |

```js
/lo{2}k/.test('look')  // => true
/lo{2,5}k/.test('looook')  // => true
```

### 分组

使用圆括号`()`可以将字符分组，将这些字符视为一个整体。

```js
/stop{2}/.test('stopp') // => true，表示字符 p 必须出现 2 次
/(stop){2}/.test('stopp') // => false，表示单词 stop 必须出现 2 次
```

### 选择符

选择符`|`表示或者关系，它会将前后的正则自动视为一个整体，不需要添加圆括号。

```js
/^cat$|^dog$/.test('cat') // => true，只要正好是 cat 或 dog 都可以
/^cat|dog$/.test('cattt') // => true，只要是 cat 开头或 dog 结尾都可以
```

### 点字符

点字符`.`匹配除了回车`\r`和换行`\n`以外的所有字符。

```js
/c.t/.test('cat') // => true
/c.t/.test('cut') // => true
```

### 转义字符

对于有特殊含义的元字符，如果要匹配它们本身，需要在前面添加转义字符`\`。

```js
/1\+1/.test('1+1') // => true
```

## 常用的正则表达式

```js
/^1[3-9]\d{9}$/                                 // 手机号码
/^[1-9]\d{4,}$/                                 // QQ号码
/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/ // 邮箱
/^[\u4e00-\u9fa5]{2}$/                          // 2 个汉字，根据情况修改数量即可
/^\w{6,16}$/                                    // 6 ~ 16 位密码，只能包含数字、字母、下划线
```