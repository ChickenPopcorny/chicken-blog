---
title: 大前端笔记之11 😄 JavaScript 基本概念
date: 2020-01-27 10:51:09
abbrlink: pk33pcs4
tags: JavaScript
categories: 大前端
excerpt: JavaScript 的主要作用是赋予页面行为。如今经常用 JavaScript 和 ECMASrcipt 表达相同的含义，但实际上 JavaScript 表示的更加广泛：它由三个部分组成，分别是 ECMAScript、DOM 和 BOM。
---

# 大前端笔记之11 😄 JavaScript 基本概念

JavaScript 的主要作用是赋予页面行为。如今经常用 JavaScript 和 ECMASrcipt 表达相同的含义，但实际上 JavaScript 表示的更加广泛：它由三个部分组成，分别是 ECMAScript、DOM 和 BOM。

ECMAScript 定义的是这门语言的基础，包括语法、类型、语句、关键字、保留字、操作符等，而浏览器只是 ECMAScript 的**宿主环境**之一。宿主环境不仅提供 ECMAScript 的实现，同时也会提供 ECMAScript 的 API，以便**ECMAScript 与宿主环境交互**，其它的宿主环境还有 Node.js、Adobe Flash 等。

到 2019 年为止，它总共经历了 10 个版本，目前最新的是 2019 年 6 月发布的 ECMAScript10。其中变革最大的为 2015 年发布的 ECMAScript6，由于后续版本更新速度加快，新特性并不是很多，因此以 ES6 指代后续所有的新版本。接下来为了方便起见，也通常使用 JavaScript 来泛指 ECMAScript。

DOM（Document Object Model，文档对象模型）是浏览器提供的 API，以便 ECMAScript 与浏览器交互。它将整个页面映射成一个多层节点的结构，其中每个部分都是某种类型的节点，这些节点又包含不同类型的数据，通过 DOM 可以轻松地删除、添加、替换或修改任何节点。

BOM（Browser Object Model，浏览器对象模型）也是浏览器提供的一个 API。通过 BOM 可以控制浏览器视口以外的部分，比如浏览器的窗口和框架等等。

## 加载 JavaScript

使用`<script>`的`src`属性可以引入外部的 JavaScript 文件：

```html
<html>
<head></head>
<body>
    <!-- 这里是页面内容 -->
    <script src="test.js"></script>
</body>
</html>
```

> 按照传统做法，所有`<script>`元素都应放在`<head>`元素中。但是，这意味着必须等到全部 JavaScript 都被下载、解析和执行完毕后，页面的内容才会呈现，这样用户在打开页面时就会看到长时间的空白。因此通常把 JavaScript 的引用放到`</body>`之前。

也可以在页面中的任何位置添加`<script>`并将代码直接写入其中：

```html
<html>
<head></head>
<body>
    <script>
        alert('hello')
    </script>
</body>
</html>
```

## 语句和表达式

语句是为了执行某个任务而进行的操作，比如赋值、判断等。在 JavaScript 中多数语句以分号`;`结尾，而且**分号可以省略**，省略与否取决于个人习惯。

```js
var a = 3 /* 这是一条语句，执行了将 3 赋值给变量 a 的操作 */
```

> 如果省略了分号，那么切记在`[`、`(`、`+`、`-`和反引号（模板字符串标记）作为首行开头时，在前面添加一个`;`，以防解析出错。

表达式是可以得到计算结果的式子，它一定会返回一个值。也就是说，只要预期为值的地方，都可以替换成表达式。

```js
var a = 1 + 2 /* 将原本的值 3 替换成了表达式 1 + 2 */
```

## 变量

变量是用来保存值的，相当于为值起一个名字，以便识别和重复使用。JavaScript 中的变量是**弱类型**的，任何[数据类型](/posts/p4xy9gkd.html)的值都可以使用`var`关键字声明的变量保存。

```js
var msg = "hello"
```

也可以在一条语句中同时声明多个变量：

```js
var msg = "hello",
    num = 233,
    isIdiot = true
```

> `var`也可以省略，但是不推荐这样做。因为正常情况下，函数中声明的变量是局部变量。假如省略了`var`关键字，那么它就不再是一个局部变量，而会成为一个**全局变量**，这会导致代码难以阅读和维护。

## 标识符

标识符是变量和函数的名称，它们的名称需要遵循一系列命名规则，不符合规则的标识符会导致程序报错，无法继续执行。

- 由字母、数字、美元符号`$`和下划线`_`组成，不允许以数字开头
- 不能使用[保留字](http://www.ecma-international.org/ecma-262/9.0/index.html#sec-reserved-words)（页面比较大，耐心等待锚点跳转）、`true`、`false`、`null`
- 区分大小写
- 建议使用驼峰命名法

## 注释

注释是 JavaScript 引擎忽略的部分，它们不会被解析，可以用来对程序进行说明。其中单行注释以双斜线`//`开头，多行注释以`/*`开头，以`*/`结尾。

```js
// 这是一条单行注释
/*
    这是一条多行注释
*/
```

## 运算符

运算符用来对值进行处理，从而得到新的值。

### 赋值运算符

赋值运算符会将右侧的运算数赋值给左侧的运算数。

| 运算符 | 运算符 | 运算符 |
| --- | --- | --- |
| 赋值`=` | 加赋值`+=` | 减赋值`-=` |
| 乘赋值`*=` | 除赋值`/=` | 模赋值`%=` |

为了简化代码，JavaScript 对一些常用的算数并赋值的运算进行了合并，称为**复合赋值运算符**。

```js
num = num + 2 // 相当于
num += 2
```

赋值运算符可以连续调用，执行顺序是从右向左。但是这样的用法会带来很多意料之外的问题，建议不要使用。

```js
var a = b = c = 2 // 相当于

var a
c = 2
b = c
a = b
```

### 算数运算符

算数运算符用来完成基本的算术运算。

| 运算符 | 运算符 | 运算符 | 运算符 | 运算符
| --- | --- | --- | --- | --- |
| 加法运算符`+` | 减法运算符`-` | 乘法运算符`*` | 除法运算符`/` | 指数运算符`**` |
| 取余运算符`%` | 自增运算符`++` | 自减运算符`--` | 一元正号`+` | 一元负号`-` |

#### 加法运算符

与其它算术运算符有所不同的是，如果其中一个运算数为字符串，那么就会将其它的运算数通过`String()`转换为字符串，表示字符串拼接；否则，就将所有运算数转换为数值，表示数学运算。（见[数据类型](/posts/p4xy9gkd.html)一节）

```js
1 + 2               // => 3
1 + false           // => 1
null + false        // => 0
'hello' + 1         // => hello1
'hello' + false     // => hellofalse
```

#### 自增减运算符

自增减运算符根据相对于运算数的位置，含义有所不同。当它放在运算数左侧时，表示**先自增，后取值**；反之，当它放在运算数右侧时，表示**先取值，后自增**。

```js
var num = 8
console.log(num++) // => 8

var num = 8
console.log(++num) // => 9
```

注意，自增减运算符**只能操作变量**，不能操作值。

### 比较运算符

| 运算符 | 运算符 | 运算符 | 运算符 |
| --- | --- | --- | --- |
| 相等`==` | 不相等`!=` | 严格相等`===` | 严格不相等`!==` |
| 大于`>` | 大于等于`>=` | 小于`<` | 小于等于`<=` |

#### 严格相等

JavaScript 中的相等运算分为普通相等和严格相等两种。（见[数据类型](/posts/p4xy9gkd.html)一节）

普通相等运算的规则如下：

- 如果运算数类型相同，就直接进行比较
- 如果运算数类型不同，则尝试先转换成相同的类型，再进行比较：
    - 比较数字和字符串时，会将字符串转换为数字，再比较两个数字
    - 比较布尔值和其它类型时，会先将布尔值转换为数字，再比较数字和其它类型
    - 比较`null`和`undefined`时，结果是`true`

使用严格相等运算时，只有两个运算数的类型和值都相等，才返回`true`。

```js
99 == '99' // => true
99 === '99' // => false
```

当比较两个对象时，`==`和`===`效果相同，即比较两个引用所指向的对象是否是同一个。如果是同一个对象，就返回`true`，否则返回`false`。

### 逻辑运算符

下面的逻辑运算符会导致运算数自动调用`Boolean()`进行[数据类型](/posts/p4xy9gkd.html)转换。

| 运算符 | 运算符 | 运算符 |
| --- | --- | --- |
| 逻辑与`&&` | 逻辑或`\|\|` | 逻辑非`!` |

#### 短路运算

逻辑与`&&`和逻辑或`||`运算符会从左到右依次判断每个条件，如果左侧的某个条件已经确定了整个运算的结果，那么后面的条件就不再执行（即使发生语法错误也不会报错）。

```js
10 < 5 && Math.sqrt(-1) // false
10 > 5 || Math.sqrt(-1) // true
```

## 流程控制

程序默认都是从上向下依次执行的，使用流程控制语句则可以改变顺序执行结构。流程控制语句总共有两类，分支结构和循环结构。

### 分支结构

分支结构可以使程序根据情况作出判断，从多条路线中选择一条继续执行，而忽略其它路线。

#### if 结构

最简单的`if`结构由`if`关键字、圆括号（表示判断条件）和花括号（表示条件满足时执行的操作）组成。判断条件可以是布尔型的值或者表达式，如果不是，则会自动调用`Boolean()`进行[数据类型](/posts/p4xy9gkd.html)转换。

```js
if (age > 18) {
    console.log('可以进网吧啦')
}
```

使用`else`可以表示当条件不满足时，所执行的操作。

```js
if (age > 18) {
    console.log('可以进网吧啦')
} else {
    console.log('一边玩去！')
}
```

多个`if else`结合在一起使用，可以表示多次判断。注意，JavaScript 中没有`elseif`这个关键词。

```js
if (age < 18) {
    console.log('一边玩去！')
} else if (age >= 18 && age < 50) {
    console.log('可以进网吧啦')
} else if (age >= 50) {
    console.log('啥？你是来找网瘾少年的吗？')
}
```

#### 三元运算符

三元运算符`判断条件 ? 表达式1 : 表达式2 `是`if else`的简写形式，它表示如果`条件表达式`满足，则返回`表达式1`，否则返回`表达式2`。

```js
console.log(age >= 18 ? '可以进网吧啦' : '一边玩去！')
```

#### switch 结构

如果要判断是否为一个具体的值，而非某个范围，那么使用`switch`可以使结构更加清晰。

在下面的代码中，根据`fruit`的值不同从而执行不同的操作。每个可能的值使用`case`表示，冒号后面为满足该值时执行的操作。注意，每个`case`之后都使用了`break`语句，否则当其中一个`case`满足时，会连带后续的所有`case`一并执行，发生所谓的穿透现象。最后，可以使用`default`表示当所有`case`均不满足时执行的操作。此外，如果有多个`case`的值执行相同操作，那么可以连续使用`case`。

```js
var fruit = 'orange'

switch (fruit) {
    case '橘子':
    case 'orange':
        console.log('橘子五毛一斤')
        break
    case 'banana':
        console.log('香蕉一块一斤')
        break
    default:
        console.log('没这东西！')
}
```

注意，JavaScript 中的`switch`结构比较结果采用的是**严格相等**，因此比较时不会发生类型转换。

### 循环结构

循环结构可以使程序根据条件反复执行同一段操作，直到条件不成立为止。

#### while 结构

`while`循环由两部分组成，圆括号中的循环条件和花括号中的循环体。

```js
var i = 1

while (i <= 10) {
    console.log('这是第' + i + '次循环啦')
    i++ /* 改变循环条件，否则会出现死循环 */
}
```

#### for 结构

如果有明确的循环次数，那么可以使用更加方便的`for`循环。

```js
for (var i = 1; i <= 10; i++) {
    /* 执行 10 次相应代码 */
}
```

#### 跳出循环

使用`break`和`continue`语句可以跳出循环。区别在于，`break`会跳出整个循环体，而`continue`是跳出本次循环，继续下一次循环。

```js
for (var i = 1; i <= 5; i++) {
    if (i == 3) {
        console.log('这个包子有毒！不吃了！吃下一个！')
        continue
    }
    console.log('我正在吃第' + i + '个包子。')
}
```

```js
for (var i = 1; i <= 5; i++) {
    if (i == 3) {
        console.log('这个包子有毒！去拉肚子了！剩下的不吃了！')
        break
    }
    console.log('我正在吃第' + i + '个包子。')
}
```