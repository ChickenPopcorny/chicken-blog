---
title: 大前端笔记之05 📦 CSS 盒模型
date: 2020-01-22 1:08:01
abbrlink: 08603cll
tags: CSS
categories: 大前端
excerpt: 每个元素都会生成一个矩形的元素盒子，从外到内依次为外边距、边框、内边距和内容区。
---

# 大前端笔记之05 📦 CSS 盒模型

每个元素都会生成一个矩形的元素盒子，从外到内依次为外边距、边框、内边距和内容区。

## 外边距

使用`margin`设置元素的外边距，即元素之间的距离。该属性是`margin-top`、`margin-right`、`margin-bottom`和`margin-left`四个属性的简写属性。可以单独使用它们设置某个方向的外边距，或者使用`margin`同时设置不同的方向。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `0` |

| 可选值 | 描述 |
| --- | --- |
| `auto` | 见[包含块](/posts/vv37590w.html)一节 |
| 长度值 | 设置具体的外边距 |

该属性根据数量不同分别表示不同的方向：

| 值的数量 | 描述 |
| --- | --- |
| 4 | 分别对应「上，右，下，左」 |
| 3 | 分别对应「上，左右，下」 |
| 2 | 分别对应「上下，左右」 |
| 1 | 同时设置四个方向 |

### 外边距合并

如果同一个[BFC](/posts/9obo9xpo.html)中的上下外边距紧挨在一起的话，那么会产生合并的现象，相当于它们共同拥有一个外边距。

合并的规则如下：如果都是正值，则保留较大的一个；如果是一正一负，则保留它们的和；如果都是负值，则保留绝对值较大的一个。

```css
div:first-child { /* 上面的 <div> */
    margin-bottom: 50px;
}
div:last-child { /* 下面的 <div> */
    margin-top: 30px;
}
/* 它们实际的距离为 50px */
```

另外，父元素和子元素在**上方**的外边距也会发生合并，合并规则同上，但是合并后的外边距会交给**父元素**来表现。

在下面的代码中，一个`<div>`元素中包含一个子元素`<p>`，此时`<div>`不会出现在浏览器最顶端，而是被子元素的`margin-top`连带着一起向下移动了`100px`，父子元素之间则没有任何距离。

```css
div { height: 400px; }
p { height: 200px; margin-top: 100px; }
```

使用下面的方法可以避免这种情况：

- 父元素触发[BFC](/posts/9obo9xpo.html)
- 父元素对应方向的`border`或`padding`不为`0`
- 父子元素之间有行内元素分隔

## 内边距

使用`padding`设置元素的内边距，即元素内容与边框之间的距离。该属性是`padding-top`、`padding-right`、`padding-bottom`和`padding-left`四个属性的简写属性。可以单独使用它们设置某个方向的内边距，或者使用`padding`同时设置不同的方向。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `0` |

| 可选值 | 描述 |
| --- | --- |
| 长度值 | 设置具体的内边距 |

该属性根据数量不同分别表示不同的方向：

| 值的数量 | 描述 |
| --- | --- |
| 4 | 分别对应「上，右，下，左」 |
| 3 | 分别对应「上，左右，下」 |
| 2 | 分别对应「上下，左右」 |
| 1 | 同时设置四个方向 |

## 边框

使用`border`设置元素的边框。该属性是`border-width`、`border-style`和`border-color`三个属性的简写属性，顺序没有要求。

### 边框宽度

使用`border-width`设置边框的宽度，该属性是`border-top-width`、`border-right-width`、`border-bottom-width`和`border-left-width`四个属性的简写属性。可以单独使用它们设置某个方向的边框宽度，或者使用`border-width`同时设置不同的方向。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `medium` |

| 可选值 | 描述 |
| --- | --- |
| `medium` | 浏览器自定义 |
| 长度值 | 设置具体的边框宽度 |

该属性根据数量不同分别表示不同的方向：

| 值的数量 | 描述 |
| --- | --- |
| 4 | 分别对应「上，右，下，左」 |
| 3 | 分别对应「上，左右，下」 |
| 2 | 分别对应「上下，左右」 |
| 1 | 同时设置四个方向 |

### 边框样式

通过`border-style`可以设置边框的样式，该属性是`border-top-style`、`border-right-style`、`border-bottom-style`和`border-left-style`四个属性的简写属性。可以单独使用它们设置某个方向的边框样式，或者使用`border-style`同时设置不同的方向。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `none` |

| 可选值 | 描述 |
| --- | --- |
| `none` | 无边框样式，由于该值是默认值，因此**如果没有这个属性，边框就不会存在** |
| `solid` | 实线 |
| `dotted` | 点线 |
| `dashed` | 破折线 |

该属性根据数量不同分别表示不同的方向：

| 值的数量 | 描述 |
| --- | --- |
| 4 | 分别对应「上，右，下，左」 |
| 3 | 分别对应「上，左右，下」 |
| 2 | 分别对应「上下，左右」 |
| 1 | 同时设置四个方向 |

### 边框颜色

使用`border-color`设置边框的颜色，该属性是`border-top-color`、`border-right-color`、`border-bottom-color`和`border-left-color`四个属性的简写属性。可以单独使用它们设置某个方向的边框颜色，或者使用`border-color`同时设置不同的方向。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | 当前元素的`color`属性值 |

| 可选值 | 描述 |
| --- | --- |
| 颜色值 | 任何合法的颜色值 |

该属性根据数量不同分别表示不同的方向：

| 值的数量 | 描述 |
| --- | --- |
| 4 | 分别对应「上，右，下，左」 |
| 3 | 分别对应「上，左右，下」 |
| 2 | 分别对应「上下，左右」 |
| 1 | 同时设置四个方向 |

### 边框方向

除上述方式之外，还可以使用`border-top`、`border-bottom`、`border-left`和`border-right`来简写对应方向的**宽度、样式和颜色**值。这些属性要求值的顺序严格，但是可以省略其中的任意值。

```css
div { border-top: 1px solid #ccc; }
```

### 边框圆角

使用`border-radius`设置边框圆角。注意，该属性不会改变元素盒子实际的形状。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `0` |

| 可选值 | 描述 |
| --- | --- |
| 长度值 | 设置具体的圆角大小 |
| 百分比值 | 相对于对应方向的`border`长度 |

该属性根据数量不同分别表示不同的方向：

| 值的数量 | 描述 |
| --- | --- |
| 4 | 分别对应「左上，右上，右下，左下」 |
| 3 | 分别对应「左上，右上左下，右下」 |
| 2 | 分别对应「左上右下，右上左下」 |
| 1 | 同时设置四个方向 |

圆角的大小本质是一个圆或者椭圆的半径，使用它的四分之一来定义边框的弧度。比如：

```css
div { border-radius: 10px; }
```

![](https://pic1.superbed.cn/item/5dfb269376085c3289c4d1f7.jpg)

### 边框图片

边框图片用于设置更复杂的边框。注意，必须将`border-style`设置成一个不为`none`的值，否则边框图片无法显示。

#### 图片路径

使用`border-image-source`设置图片的路径，不能省略。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `none` |

| 可选值 | 描述 |
| --- | --- |
| `none` | 没有边框图片 |
| `url()` | 图片的 URL |

#### 裁切位置

使用`border-image-slice`设置图片的裁切位置。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `100%` |

| 可选值 | 描述 |
| --- | --- |
| 数字值 | **不能加单位**，默认为像素 |
| 百分比值 | 相对于图片的宽高 |

该属性根据数量不同分别表示不同的方向：

| 值的数量 | 描述 |
| --- | --- |
| 4 | 分别对应「上，右，下，左」 |
| 3 | 分别对应「上，左右，下」 |
| 2 | 分别对应「上下，左右」 |
| 1 | 同时设置四个方向 |

该属性的作用原理是，浏览器会在边框图片上放置 4 条切割线，每条线到图片边缘的距离就是`border-image-slice`的值。

例如，背景图片为`500 × 500`大小，那么将 4 个值设置为`167`或`33.3%`正好可以将其等分为 9 份，从而形成一个九宫格。

```css
div {
    border-image-slice: 167; /* 左图 */
    border-image-slice: 10% 20% 30% 50%; /* 右图 */
}
```

![](https://pic2.superbed.cn/item/5dfb28a176085c3289c531d2.jpg)

然后，九宫格的四个角会分别作为边框的四角，而上下左右四个部分会作为边框的四边，按照一定的方式平铺：

![](https://pic.superbed.cn/item/5dfb28c576085c3289c537f1.jpg)

因此，如果将 4 个值全部设置为`50%`，那么图片只能被等分为 4 份，只有 4 个角才有图案，分别为图片的四分之一；如果将 4 个值全部设置为`100%`，那么图片只有 1 份，该图片会被完整的显示在 4 个角上，四边依然没有图案。

![](https://pic.superbed.cn/item/5dfb28ec76085c3289c542d1.jpg)

#### 边的平铺方式

使用`border-image-repeat`设置四边的平铺方式。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `stretch` |

| 可选值 | 描述 |
| --- | --- |
| `stretch` | 拉伸 |
| `repeat` | 将边框图片放在边框的中央，然后向两侧重复，边缘的部分可能会被截断 |
| `round` | 改变边框图片的尺寸，使其正好放置在边框之内 |

![](https://pic.superbed.cn/item/5dfb294976085c3289c55bdc.jpg)

#### 边框图片宽度

使用`border-image-width`设置边框图片的宽度。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `1` |

| 可选值 | 描述 |
| --- | --- |
| 数字值 | 表示`border-width`的倍数 |
| 长度值 | 设置具体的边框图片宽度 |

该属性的原理与`border-image-slice`相似，区别在于`border-image-width`是在元素（边框区域）上绘制 4 条切割线，然后将切割出来的部分作为边框图片的绘制区域。

![](https://pic3.superbed.cn/item/5dfb296776085c3289c561f4.jpg)

上面的两个元素均设置了`30px`的`border-width`、`200px`的宽高，区别在于左图单独设置了`20px`的`border-image-width`。可见默认情况下，边框图片绘制在**元素的内部**，不会导致元素扩大。而且，虽然图片边框没有实际边框大，但是**只要是图片边框存在，那么实际边框就不会显示，就好像是透明了一样（因为大小还在）**，因此被元素的背景色填充。

> 按照《CSS 权威指南》中的说法，`border-width`不会影响边框图片的显示，只会影响元素的大小。但是在 Chrome 下，如果没有设置`border-width`，那么 Chrome 会默认为其添加`3px`的大小。如果直接将其设置为`0`，那么边框图片会**无法显示**。

#### 绘制位置

默认情况下，边框图片绘制在元素的内部，不会导致元素扩大。使用`border-image-outset`属性可以设置边框图片向元素外推移。注意，该属性可能会导致边框图片与其它元素重叠，或者被浏览器边界截断。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `0` |

| 可选值 | 描述 |
| --- | --- |
| 数字值 | 表示`border-width`的倍数 |
| 长度值 | 设置具体向外推移的距离 |

![](https://pic3.superbed.cn/item/5dfb298176085c3289c569b1.jpg)

#### 简写属性

使用`border-image`可以简写上述所有属性，其中图片路径`border-image-source`和平铺方式`border-image-repeat`可以写在任意位置，但是`border-image-slice`、`border-image-width`和`border-image-outset`必须按照顺序写在一起，并使用`/`分隔。其中除了图片路径外，其它的值都可以省略。

```css
div { border-image: url("a.jpg") 33.3% / 20px / 30px round; }
```

## 宽高

使用`width`可以设置元素**内容区（默认）**的宽度。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 块级元素和行内替换元素 | 不可继承 | `auto` |

| 可选值 | 描述 |
| --- | --- |
| `auto` | 见[包含块](/posts/vv37590w.html)一节 |
| 长度值 | 设置具体的宽度 |
| 百分比值 | 相对于[包含块](/posts/vv37590w.html)的`width` |

使用`height`设置元素**内容区（默认）**的高度。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 块级元素和行内替换元素 | 不可继承 | `auto` |

| 可选值 | 描述 |
| --- | --- |
| `auto` | 表示高度正好容纳它的子元素 |
| 长度值 | 设置具体的高度 |
| 百分比值 | 相对于[包含块](/posts/vv37590w.html)的`height`，如果包含块没有一个**具体**的`height`，则相当于设置为`auto` |

### 修改作用区域

使用`box-sizing`改变宽高的作用区域。默认情况下，`width`和`height`作用于内容区，添加额外的内边距或边框会导致元素实际会大于设置的`width`或`height`。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 块级元素和行内替换元素 | 不可继承 | `content-box` |

| 可选值 | 描述 |
| --- | --- |
| `content-box` | 表示宽高作用于内容区 |
| `border-box` | 表示宽高作用于边框区域 |

### 最大 / 最小宽高

使用`min-width`、`max-width`、`min-height`和`max-height`四个属性可以限制元素的宽度和高度，它们的用法与`width`和`height`基本一致。

## 轮廓

使用`outline`设置元素的轮廓。它显示在边框和外边距之间，但是**不占据任何空间**。而且，轮廓**没有简写属性**，因此只能将四个方向的轮廓设置为同一个样式或者不设置。

将文本框设置为`outline: none`可以清除其默认的蓝色轮廓效果。

## 行内盒模型

对于行内元素来说，它们在普通盒模型中的内容区比块级元素更加复杂。

首先，设计师在 EM Square 中设计出每个字符，不同字体的字符在 EM Square 中的位置可能会有所不同（例如微软雅黑会偏下），有些装饰笔画甚至会超出 EM Square 。多个字符的 EM Square 排列在一起会构成行内盒模型的**内容区**（与普通盒模型中内容区没关系），使用`font-size`可以控制它的高度。

然后，每个内容区外会包裹一个**行内盒子**，使用`line-height`可以控制它的高度，默认情况下内容区和行内盒子的高度应该是一样的。而且，只有`line-height`才能控制行内盒子的实际高度，如果行内盒子高度小于内容区，那么虽然内容可以正常显示，但是上下两行会重叠在一起。

但是，由于有些字体的个别部分可能会超出内容区，因此浏览器为了使行内盒子能容纳下每个字符而不至于发生重叠，通常默认将行内盒子的高度也就是`line-height`的值设置的比内容区稍大一点，通常为`1.2`，即内容区高度的`1.2`倍。因此，行内盒子和内容区之间会产生一定的距离，称为**行间距**。然后浏览器会将行间距等分成两份，分别在内容区的上下各添加一份。由于行间距是等分的，因此**内容区总是在行内盒子的中间位置**，通过这个特性，可以实现单行文本的垂直居中。

![](https://pic.superbed.cn/item/5dfa9dfa76085c3289ae2e89.png)

最后，一行中的所有行内盒子又会被一个更大的盒子包裹，称为**行框**。行框的高度由其内部所有的行内盒子决定，浏览器会计算每个行内盒子的高度，并且采用它们的**最高点和最低点**作为行框的上下边缘。使用`vertical-align`可以控制行内盒子在行框中的位置。

### 单行文本垂直居中

假如一个**块级元素**中只包含单行的文本，那么可以将文本的行高设置成与块级元素的高度一致。由于行间距的等分特性，那么文字正好可以在块级元素内垂直居中。当然，如果文本超过了一行，这样的方式就行不通了。

```html
<div>我垂直居中啦~</div>
```

```css
div {
    height: 300px;
    line-height: 300px;
}
```

### 去除图片下方缝隙

行内元素默认的基线对齐会导致图片下方出现缝隙，这是因为浏览器会在**每个行框的开头**添加一个**没有宽度的、永远透明的空白字符**，规范中称之为**支柱**（strut）。由于支柱的基线下方有一定距离，而图片的基线是下边缘，因此为了基线对齐，图片需要向上移动一小段距离，导致出现了缝隙。

![](https://ae01.alicdn.com/kf/H32ad8300165d43fc98b0d901b3bede44Q.jpg)

解决这个问题的方法有很多，比较常见的是将图片的`vertical-align`改为`middle`或`top`，或者将图片设置为块级元素。