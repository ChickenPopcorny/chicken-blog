---
title: 大前端笔记之06 🏢 CSS 布局
date: 2020-01-23 0:49:46
abbrlink: rbty8hf8
tags: CSS
categories: 大前端
excerpt: 默认情况下，元素都位于普通文档流中，此时元素会按照从上到下、从左到右依次排列。但是通过下面的方式，可以修改元素的排列方式。
---

# 🏢 CSS 布局

默认情况下，元素都位于普通文档流中，此时元素会按照从上到下、从左到右依次排列。但是通过下面的方式，可以修改元素的排列方式。

## 浮动

浮动原本是用来修改文章中图片位置的，但是它经常被误用于布局中，用来使多个元素排列在一行。

使用`float`可以设置元素浮动。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `none` |

| 可选值 | 描述 |
| --- | --- |
| `none` | 不浮动 |
| `left` | 左浮动 |
| `right` | 右浮动 |

浮动的元素会部分脱离文档流，具体来说，它有以下几个特征：

**首先，块级元素看不到浮动元素，会沉到浮动元素下层。**

![](http://cdn.yesuanzao.cn/superbed/2020/01/23/5e28d1232fb38b8c3c2a0f24.jpg)

```html
<div class="float-box"></div>
<div class="block-box"></div>
```

```css
.float-box { float: left; }
```

**然后，行内元素或行内块元素可以看到浮动元素，会环绕在浮动元素周围。**

![](http://cdn.yesuanzao.cn/superbed/2020/01/23/5e28d2372fb38b8c3c2a2fe9.jpg)

```html
<div class="float-box"></div>
<span class="inline-box">啦啦啦</span>
```

```css
.float-box { float: left; }
```

**但是，浮动元素能看到文档流中的所有元素，避开块级元素排列到它们下方，避开行内元素排列到它们左侧或右侧。**

![](http://cdn.yesuanzao.cn/superbed/2020/01/23/5e28d3a42fb38b8c3c2ae436.jpg)

```html
<div class="block-box"></div>
<div class="float-box"></div>
```

```css
.float-box { float: left; }
```

除了脱离文档流之外，它还有下面一些其它特性：

- 如果没有为元素设置`width`，那么浮动元素会根据内容收缩
- 会自动拥有**行内块元素**的一些特性，可以定义宽度高度，也可以与其它元素排成一行
- `margin`的`auto`值无效

### 清除浮动

使用`clear`可以避免文档流中后面的**块级元素**沉到浮动元素下层，使其排列到浮动元素下方，而不是与它重叠在一起。也就是说，可以让块级元素看到浮动元素。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 块级元素 | 不可继承 | `none` |

| 可选值 | 描述 |
| --- | --- |
| `none` | 不清除浮动 |
| `both` | 避开两侧的浮动元素，排列到它们下方 |

![](http://cdn.yesuanzao.cn/superbed/2020/01/23/5e28d5982fb38b8c3c2b07bf.jpg)

```html
<div class="float-box"></div>
<div class="block-box"></div>
```

```css
.float-box { float: left; }
.block-box { clear: both; }
```

### 高度塌陷

如果一个块级元素没有设置高度，并且只包含浮动元素，那么会导致它无法获得子元素高度，从而高度为`0`，这称为浮动元素引起的高度塌陷。

在下面的代码中，虽然浮动元素自身有高度，但是父元素的高度依然为`0`，导致后面的元素直接将该元素覆盖。

```html
<div class="container">
    <div class="float-box"></div>
</div>
```

```css
.float-box { 
    float: left;
    height: 200px; 
}
```

使用`clear`可以解决这个问题，只需在父元素中通过伪元素`::after`追加一个清除浮动的**块级元素**即可：

```css
.container::after {
    display: block; /* clear 只能应用于块级元素 */
    content: ""; /* 伪元素必须有 content 才能生效 */
    clear: both;
}
```

除此之外，也可以使用触发父元素[BFC](/posts/9obo9xpo.html)的方式避免高度塌陷。

## 定位

使用`position`设置元素定位。对于绝对定位和固定定位元素来说，它们会变成块级元素，并且即便[包含块](/posts/vv37590w.html)没有定义具体高度，`height: 100%`这样的属性也可以生效。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 所有元素 | 不可继承 | `static` |

| 可选值 | 描述 |
| --- | --- |
| `static` | 不定位 |
| `relative` | 相对定位，使元素相对于**原本位置**进行偏移，并且之前的位置依然会被**保留** |
| `absolute` | 绝对定位，使元素从文档流中被**完全移除**，它的位置仅受[包含块](/posts/vv37590w.html)以及偏移量影响 |
| `fixed` | 固定定位，与绝对定位的唯一不同是，它的[包含块](/posts/vv37590w.html)是浏览器窗口 |

### 偏移量

使用`top`、`right`、`bottom`、`left`设置定位元素的偏移量，即相对于[包含块](/posts/vv37590w.html)某个方向的距离。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 定位元素 | 不可继承 | `auto` |

| 可选值 | 描述 |
| --- | --- |
| `auto` | 见[包含块](/posts/vv37590w.html)一节 |
| 长度值 | 设置具体的偏移量 |
| 百分比值 | 水平方向相对于[包含块](/posts/vv37590w.html)的`width`，垂直方向相对于[包含块](/posts/vv37590w.html)的`height` |

### 层叠位置

由于定位后的元素可能会相互重叠，使用`z-index`属性可以设置在同一个[层叠上下文](/posts/xsvc751j.html)中哪个元素显示在上层。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 定位元素 | 不可继承 | `auto` |

| 可选值 | 描述 |
| --- | --- |
| `auto` | 如果只有一个[层叠上下文](/posts/xsvc751j.html)的话，相当于`0` |
| 整数值 | 数值越大，元素越靠近上层，可以为负数 |

## 弹性布局

弹性布局是 CSS3 新增的一种非常强大的布局方式，但是由于兼容性问题，目前主要使用在移动端。

使用`display: flex`或者`display: inline-flex`将元素变成**弹性容器**，其中的**直接**子元素则会自动变成**弹性项目**。

```html
<div class="box">
    <div class="item">我是项目1号</div>
    <span class="item">我是项目2号</span>
    <p class="item">我是项目3号</p>
</div>
```

```css
.box { display: flex; }
```

虽然容器中的元素原本不同，但是现在它们都变成了项目，除了元素自带的样式外，它们都是一样的。这时项目的一些属性会失效，比如`float`、`vertical-align`或者`display: block`等。

容器有两根轴，分别为**主轴**和**交叉轴**，其中的项目会依次沿主轴排列，默认**从左到右**。将主轴**顺时针旋转90°**就得到了交叉轴，因此交叉轴默认**从上到下**。

### 主轴方向

使用`flex-direction`设置主轴方向，注意这会导致**交叉轴同时被旋转**。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 弹性容器 | 不可继承 | `row` |

| 可选值 | 描述 |
| --- | --- |
| `row` | 从左到右 |
| `row-reverse` | 从右到左 |
| `column` | 从上到下 |
| `column-reverse` | 从下到上 |

![](https://pic3.superbed.cn/item/5dfae7d276085c3289ba06b8.jpg)

### 主轴对齐

使用`justify-content`设置项目在主轴上的对齐方式。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 弹性容器 | 不可继承 | `flex-start` |

| 可选值 | 描述 |
| --- | --- |
| `flex-start` | 左对齐（主轴的起点） |
| `flex-end` | 右对齐（主轴的末尾） |
| `center` | 居中对齐 |
| `space-between` | 两端对齐，项目之间的距离相等 |
| `space-around` | 项目两侧的距离相等 |

![](https://pic.superbed.cn/item/5dfae8e676085c3289ba3409.jpg)

### 交叉轴对齐

使用`align-items`和`align-self`设置所有项目 / 单个项目在交叉轴上的对齐方式。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 弹性容器 | 不可继承 | `stretch` |

| 可选值 | 描述 |
| --- | --- |
| `stretch` | 拉伸至容器的高度（交叉轴对应的方向）。如果项目设置了高度，则该属性值无效 |
| `flex-start` | 顶部对齐（交叉轴的起点） |
| `flex-end` | 底部对齐（交叉轴的末尾） |
| `center` | 居中对齐 |
| `baseline` | 基线对齐，以项目内的第一行文本为准 |

![](https://pic2.superbed.cn/item/5dfaeb4376085c3289ba9671.jpg)

### 主轴剩余空间分配

如果项目的宽度总和不能填满主轴的宽度，那么多余的空间保留会被保留，使用`flex-grow`属性可以设置这些**剩余空间**如何分配。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 弹性容器 | 不可继承 | `0` |

| 可选值 | 描述 |
| --- | --- |
| 数字值 | 表示分配给该项目的剩余空间比例。设置为`0`表示该项目不分配剩余空间，保持原来大小；所有项目均为同一个`>= 1`的数，那么表示所有项目**等分剩余空间**；如果它们不为同一个数，则按照数值的比例进行分配 |

![](https://pic.superbed.cn/item/5dfaeca076085c3289bad146.jpg)

如果项目的宽度总和超过了填满主轴的宽度，那么剩余空间为负，使用`flex-shrink`属性可以设置这些**负的剩余空间**如何分配。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 弹性容器 | 不可继承 | `1` |

| 可选值 | 描述 |
| --- | --- |
| 数字值 | 表示分配给该项目的剩余空间比例。设置为`0`表示空间不足时该项目不会缩小自身，如果所有项目均设置为`0`，那么它们会超出容器；所有项目均为同一个`>= 1`的数，那么表示项目以相同比例缩小；如果它们不为同一个数，则按照数值的比例进行分配 |

注意，即使项目设置了宽度`width`，当剩余空间不足时，这些项目也会被缩小。如果不希望它们的宽度被改变，那么将其设置为`flex-shrink: 0`。

### 自动换行

使用`flex-wrap`设置当主轴空间不足时，项目自动换行。该属性的优先级比项目缩小要高，如果一行下不能容纳所有元素，那么会优先换行而不是缩小元素。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 弹性容器 | 不可继承 | `nowrap` |

| 可选值 | 描述 |
| --- | --- |
| `nowrap` | 不换行 |
| `wrap` | 允许项目自动换行 |

![](https://pic3.superbed.cn/item/5dfaeed876085c3289bb3391.jpg)

### 多行对齐

使用`align-content`设置当发生换行时，行的排列方式。如果容器只有一行，或者不允许自动换行，那么该属性无效。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 弹性容器 | 不可继承 | `stretch` |

| 可选值 | 描述 |
| --- | --- |
| `stretch` | 拉伸到当前行高度最大项目的高度 |
| `flex-start` | 顶端对齐（交叉轴的起点） |
| `flex-end` | 底部对齐（交叉轴的终点） |
| `center` | 居中对齐 |
| `space-between` | 两端对齐，行之间的距离相等 |
| `space-around` | 行两侧的距离相等 |

![](https://pic2.superbed.cn/item/5dfaee5d76085c3289bb1ed6.jpg)

## 表格布局

表格是 CSS 中类似于传统 HTML 表格的布局方式。使用`display`属性可以将元素设置为表格样式：

- `table`：块级表格，等同于`<table>`标签
- `inline-table`：行内块表格，等同于`<table>`标签，并设置为`inline-block`
- `table-row`：定义行，等同于`<tr>`标签
- `table-cell`：定义单元格，等同于`<td>`或`<th>`标签

### 表格边框模型

使用`border-collapse`设置表格的边框模型。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 表格元素 | 可继承 | `separate` |

| 可选值 | 描述 |
| --- | --- |
| `separate` | 分离边框模型，单元格之间彼此分开，产生一定的缝隙，每个单元格有自己独立的边框 |
| `collapse` | 折叠边框模型，单元格之间的缝隙完全清除，相邻的单元格共用一条边框 |

不同的边框模型会导致表格元素的部分盒模型属性失效：

| | 表格（分离） | 表格（折叠） | 行（分离） | 行（折叠） | 单元格（分离） | 单元格（折叠） |
| --- | --- | --- | --- | --- | --- | --- |
| `margin`  | ✔️ | ✔️ | ❌ | ❌ | ❌ | ❌ |
| `border`  | ✔️ | ✔️ | ❌ | ✔️ | ✔️ | ✔️ |
| `padding` | ✔️ | ❌ | ❌ | ❌ | ✔️ | ✔️ |

如果使用了折叠边框模型，但是相邻单元格或行的边框不同，那么会采用下面的规则决定边框的优先级：

- 如果边框为`border-style: hidden`，那么优先级最高
- 如果边框都是可见的，那么宽度更大的边框优先
- 如果边框宽度相同，那么按照边框样式排序，优先级由高到低为`double`、`solid`、`dashed`、`dotted`、`ridge`、`outset`、`groove`、`inset`、`none`
- 如果样式和宽度都相同，但颜色不同，那么优先级由高到低为单元格、行、列、表。如果两个元素都是单元格，那么位置更靠近**右下**的优先

### 单元格间距

使用`border-spacing`设置单元格的间距，即单元格边框到表格内边距，以及相邻单元格之间的距离。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 分离边框模型的表格元素 | 可继承 | `0` |

| 可选值 | 描述 |
| --- | --- |
| 长度值 | 设置具体的距离，如果只有一个值则同时表示水平和垂直方向；如果有两个值，则前者表示水平方向，后者表示垂直方向 |

```css
table { 
    padding: 20px;
    border-spacing: 20px; 
}  
```

![](http://cdn.yesuanzao.cn/superbed/2020/01/23/5e28e87c2fb38b8c3c2e14e2.jpg)

### 空单元格

使用`empty-cell`设置空单元格的处理方式。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 分离边框模型的表格元素 | 可继承 | `show` |

| 可选值 | 描述 |
| --- | --- |
| `show` | 如果单元格为空，它的边框和背景依然会正常显示 |
| `hide` | 如果单元格为空，隐藏其边框和背景 |

### 宽度计算

使用`table-layout`设置表格宽度的计算方式。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 表格元素 | 可继承 | `auto` |

| 可选值 | 描述 |
| --- | --- |
| `auto` | 自动宽度布局，表格的宽度根据内容自动计算。此时表格的`width`相当于`min-width`，也就是说如果内容过多的话，浏览器会尽量将内容压缩，并忽略`width` |
| `fixed` | 固定宽度布局，表格的宽度与内容无关。如果表格的`width`为`auto`（默认值），那么浏览器会强制使用自动宽度布局 |

## 多列布局

多栏布局类似于报纸文章的排版，可以将子元素自动划分为多列显示。

### 列的数量

使用`column-count`设置列的数量，并且将元素设置为多列布局容器。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 块级元素 | 不可继承 | `auto` |

| 可选值 | 描述 |
| --- | --- |
| `auto` | 由`column-width`来决定 |
| 整数值 | 表示列的数量 |

### 列宽

使用`column-width`设置列的**最小**宽度，并且将元素设置为多列布局容器。注意，该属性与`column-count`可能会产生矛盾，最好不要同时设置。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 块级元素 | 不可继承 | `auto` |

| 可选值 | 描述 |
| --- | --- |
| `auto` | 由`column-count`来决定 |
| 长度值 | 表示列的最小宽度 |

### 列间距

使用`column-gap`设置列的间距。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 多列布局容器 | 不可继承 | `normal` |

| 可选值 | 描述 |
| --- | --- |
| `normal` | 相当于`1em` |
| 长度值 | 设置具体的列间距 |

![](https://ae01.alicdn.com/kf/H5f5aaa27c78e470fa8f4f427ec1a4642T.jpg)

### 列分隔线

使用`column-rule`设置列间隙上的分隔线。该属性是`column-rule-width`、`column-rule-style`和`column-rule-color`三个属性的简写属性，顺序没有要求。它的用法与边框基本一致，不再赘述。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 多列布局容器 | 不可继承 | `normal` |

```css
.container {
    column-rule: 5px solid orange;
}
```

![](https://ae01.alicdn.com/kf/H0e86a6389dbf43089155444522b7b2f3h.jpg)

### 内容分割

使用`break-inside`阻止内容被截断。

| 适用于 | 继承性 | 默认值 |
| --- | --- | --- |
| 多列布局容器的**内部元素** | 不可继承 | `auto` |

| 可选值 | 描述 |
| --- | --- |
| `auto` | 可能会将一块内容截断到下一列，以调整合适的高度 |
| `avoid` | 不截断元素 |

```css
.container > div {
    break-inside: avoid;
}
```

![](https://ae01.alicdn.com/kf/H83697a3d65854532b5617c913fe4b4e2c.jpg)