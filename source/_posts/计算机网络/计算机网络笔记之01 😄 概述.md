---
title: 计算机网络笔记之01 😄 概述
date: 2020-01-15 15:12:48
abbrlink: gv4bco96
tags: 计算机网络
categories: 计算机网络
excerpt: 在当今社会，人们熟悉的网络有三种：电信网络、有线电视网络和计算机网络，随着技术发展，这三种网络正逐步在高层业务层面融合为一体，称为「三网融合」，本文主要讨论的是其中的计算机网络。
---

# 计算机网络笔记之01 😄 概述

网络的概念非常宽泛，比如电信网络、有线电视网络、交通网络、神经系统网络等等，而这里的计算机网络是通信技术和计算机技术相结合的产物。具体来说，计算机网络指的是一个将分散的、具体独立功能的计算机系统（如个人电脑、移动设备等），通过通信设备（如交换机和路由器）与线路（如双绞线、光纤、无线信号等）连接起来，由功能完善的软件（操作系统）实现资源共享和信息传递的系统。

总的来说，计算机网络是互连的（一定有通信线路相连）、自治的（无主从关系）计算机集合。

## 性能指标

要评价一个计算机网络的性能，主要通过下面七个性能指标。

### 速率

速率指的是**理想状态下**主机在网络上传输数据的速度，单位为`bit/s`（可简写为`b/s`或`bps`）。因为传输的数据均是`0`或`1`的比特位，因此速率也称为比特率。

当速度更快时，可以在`b/s`前加上单位，如`Kb/s`、`Mb/s`。注意，它们之间的换算关系**与内存中**的换算有所不同：

- $1Kb/s$ = $10^3b/s$
- $1Mb/s$ = $10^6b/s$
- $1Gb/s$ = $10^9b/s$

### 带宽

带宽指的是网络所能传输的最高速度，单位同样为`bit/s`。它原本是通信中表示频带宽度的术语，如果频谱超过了最大频带，那么就会出现问题，但是在计算机网络中并不存在这样的问题，因此基本可以与速率等同。实际当中更多使用的也是带宽这一概念，是评测一个网络质量的重要指标之一。

平时购买网络设备时，所标识的千兆、百兆端口指的均是带宽；在系统中查看当前网卡的速度，也同样指的是带宽。

![](http://cdn.yesuanzao.cn/superbed/2020/01/16/5e1ffda02fb38b8c3c0abcba.jpg)

> 运营商提供的宽带业务通常会标明宽带速率是`200M`，全称应该是`200Mbit/s`。但是在实际使用时，最高下载速度只有`20MB/s`。这是因为运营商是以网络传输中的`bit`为计量单位，但是在计算机中则是以字节`Byte`（`1Byte`=`8bit`）为计量单位，因此通常将宽带运营商的数据除以 8 才是理论上最高的速度（考虑到各种其它因素，差不多除以 10 才是真正能达到的最高速度）。

### 吞吐量

吞吐量指的是单位时间内通过某个网络（或信道、接口）的数据量，即网络当前的实际速度，单位同样为`bit/s`。也就是说，虽然网络可以承载的最大速度（带宽）可能为`1Gbps`，但实际速度可能只有`200Mbps`。

### 时延

时延指的是数据从网络的一端到另一端所需要的时间，也称为延迟，是评测一个网络质量的重要指标之一。

时延由发送时延、传播时延、处理时延和排队时延四部分组成，其中最重要的是发送时延和传播时延。

$$ 时延 = \textbf{发送时延} + \textbf{传播时延} + 处理时延 + 排队时延 $$

#### 发送时延

发送时延指的是设备从发送数据的第一个 bit 起，到最后一个 bit 离开设备为止，所需要的时间。由于发送时延仅存在于网络适配器（如路由器、交换机）中，因此发送时延仅与数据帧长度以及设备的发送速率（即带宽）有关。

$$ 发送时延 = \frac{数据帧长度}{发送速率} $$

![](http://cdn.yesuanzao.cn/superbed/2020/01/18/5e2227db2fb38b8c3c4a0676.jpg)

> 发送时延也称为传输时延，但是这个名词非常容易与下面的传播时延搞混，因此不建议使用。

#### 传播时延

传播时延指的是数据在信道中传播所需要的时间。由于信道介质的传播速率基本是固定的（铜线约为$2.3 × 10^5 km/s$，光纤约为$2.0 × 10^5 km/s$），因此影响传播时延的主要因素就是信道的长度，也就是通讯双方的距离。

$$ 传播时延 = \frac{信道长度}{传播速率} $$

![](http://cdn.yesuanzao.cn/superbed/2020/01/18/5e222d502fb38b8c3c4a56fa.jpg)

> 光纤的传播速率其实比铜线要低，但是由于光纤的发送时延小，因此通常使用光纤。

#### 排队时延和处理时延

排队时延指的是通信量较大时，数据在路由器等候的时间（比如在机场排队等待安检的时间）。处理时延指的是主机或服务器收到数据帧后处理如差错校验、提出数据部分、查找路由的时间（比如在安检时被检查的时间）。这两种时延在网络正常情况下所占的比重比较小，而且情况复杂不容易计算，因此不作重点。

### 时延带宽积

将传播时延和带宽相乘，就得到了另外一个概念，时延带宽积。它表示信道可以同时容纳多少个 bit，可以理解成信道的体积。由于传播时延越大，意味着信道越长；而带宽越大，说明信道越宽（从数据角度，而非实际的通信线路），因此时延带宽积也称为以比特为单位的信道长度。

### 往返时间

往返时间（RTT）指的是数据双向交互一次所需要的时间。假设 A 与 B 通信，A 向 B 发送了数据，而且需要等待 B 接收后返回确认信息后，A 才能发送下一个数据，那么这之间就会产生 A 的等待时间，也就是往返时间。往返时间包含**2 倍的传播时延**、末端处理时间（如排队时延和处理时延），以及 B 在接收数据后的处理时间，是一个判断网络性能的综合指标。

> 使用命令行的`ping`命令查看的便是往返时间。

### 利用率

利用率指的是信道或网络的数据通过率。就好比是现实中的公路一样，利用率并不是越高越好，当利用率到达一定程度后，就会出现排队、延迟等网络性能问题（堵车），但是利用率太低，又会造成资源浪费。

## 网络体系结构

要保证数据的正确传输，需要非常多的协调工作，例如检查通信线路是否连通、如何寻找目的主机、检查对方主机是否做好接收数据的准备、如何解决可能出现的差错和意外等等问题。为了解决这些问题，早在计算机网络诞生初期就诞生了「分层」的概念，这样可以将庞大复杂的问题转化为若干较小的局部问题，便于研究和处理。

在分层结构中，有一些概念需要提前了解：

- 实体：任何可以发送或接收信息的软硬件，发送端和接收端同一层的实体称为对等实体
- 协议：**对等实体**之间进行通信的规则（因此不同层之间是没有协议一说的），也就是说双方必须按照一定约定来通信，才能保证数据可以被正确理解和传送。具体来说，它包括：
  - 语法：规定了「如何讲」，即数据格式、编码方式等
  - 语义：规定了「讲什么」，即控制信息的含义和功能
  - 时序：规定了各种操作的顺序
- 接口：也称为访问服务点SAP，是上下层之间交互的入口
- 服务：下层为上层通过接口提供的功能调用，即**下层为上层提供服务**

在网络体系结构中，实际要传递的数据称为**服务数据单元 SDU**（Service Data Unit）。在数据经过每一层时，该层都需要为数据加上一些控制信息，这些控制信息称为**协议控制信息 PCI**（Protocol Control Information）。SDU 和 PCI 合并到一起，就会作为对等层次之间传递的数据，称为**协议数据单元 PDU**（Protocol Data Unit）。

### OSI 参考模型

国际标准化组织 ISO 在 1984 年提出了 OSI 参考模型（开放系统互连参考模型），但是由于缺乏实际经验、设计复杂、标准指定时间过长等原因，该模型只有理论上的指导作用，没有产生任何的商用产品。

它将网络分为了七层，从上到下依次为应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。当一个主机需要向另外一台主机发送数据时，数据会由应用层开始，依次打上本层的头部控制信息，然后交给下一层，直到数据链路层为止（数据链路层除了添加头部信息，还需要添加尾部信息）。而物理层则会将数据链路层的信息转换成比特流进行传输。

当经过中间路由时，路由会将其拆开以寻找传递的下一站。注意，这些通信子网的设备（交换机、路由器等）只拥有低三层的功能，而没有资源子网设备（PC 终端、手机等）高三层的功能。

到达目的主机后，它会将数据层层拆分，直到最后的数据。这一系列过程就好比寄快递一样，发送方需要将货物包装、塞上填充物、放到箱子中、贴上快递单，而经过层层转交之后，到达收件人手中，再将箱子打开、取出填充物、打开包装，最后获得货物。而这些中间步骤均是为了使货物能够安全、准确的到达，虽然与货物本身没有关系，但也是必不可少的。

![](http://cdn.yesuanzao.cn/superbed/2020/02/21/5e4f897f48b86553ee349a47.jpg)

### TCP/IP 体系结构

目前计算机网络中实际使用的分层模型是 TCP/IP 体系结构，它是一个由很多协议组成的协议栈，由于其中的 TCP 和 IP 协议最为常用，才由此得名。

TCP/IP 体系结构将网络分为了四层，从上到下依次为应用层、传输层、网络层、网络接口层。但是它的网络接口层几乎没有任何实质内容，为了讲解方便，这里借用 OSI 中的物理层和数据链路层，将它们对应到网络接口层中。因此在理论上我们将网络划分为五层，但实际使用中依然是 TCP/IP 的四层。

![](http://cdn.yesuanzao.cn/superbed/2020/02/22/5e50cfe8bb8bdc23de1a88e8.jpg)

